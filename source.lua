local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService") -- Serviço de Animação Adicionado
local Workspace = game:GetService("Workspace")
local Camera = Workspace.CurrentCamera
local Player = Players.LocalPlayer

-- ==================== CONFIGURAÇÃO INICIAL ====================
local FovRadius = 150
local aimbotEnabled = false
local bringMobsEnabled = false -- Função F1 (Farm Pessoal)
local trollEnabled = false -- Função Troll (Ataque aos outros)
local trollTarget = nil -- Jogador alvo do troll
local aimKey = Enum.UserInputType.MouseButton2
local espTable = {}
local mainLoop 
local menuOpen = true -- Estado do menu

-- Localização da GUI
local targetGuiParent = game:GetService("CoreGui") or Player:WaitForChild("PlayerGui")

-- Remove versão anterior
for _, gui in pairs(targetGuiParent:GetChildren()) do
    if gui.Name == "CorruptZombies" then gui:Destroy() end
    end

    -- ==================== GUI PRINCIPAL ====================
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "CorruptZombies"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.DisplayOrder = 999
    ScreenGui.Parent = targetGuiParent

    -- ==================== FOV CIRCLE ====================
    local FovCircle = Instance.new("Frame")
    FovCircle.Name = "FovCircle"
    FovCircle.Parent = ScreenGui
    FovCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    FovCircle.BackgroundTransparency = 1
    FovCircle.BorderSizePixel = 0
    FovCircle.AnchorPoint = Vector2.new(0.5, 0.5)
    FovCircle.Position = UDim2.new(0.5, 0, 0.5, 0)
    FovCircle.Size = UDim2.new(0, FovRadius * 2, 0, FovRadius * 2)
    FovCircle.Visible = true

    local FovStroke = Instance.new("UIStroke")
    FovStroke.Parent = FovCircle
    FovStroke.Color = Color3.fromRGB(255, 50, 50)
    FovStroke.Thickness = 2
    FovStroke.Transparency = 0.3
    Instance.new("UICorner", FovCircle).CornerRadius = UDim.new(1, 0)

    -- ==================== MENU ====================
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 500, 0, 450)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5) -- Importante para a animação
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.Visible = false -- Começa invisível para animar na entrada
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Parent = ScreenGui
    Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

    -- ADICIONADO: UIScale para controlar a animação de tamanho
    local UIScale = Instance.new("UIScale")
    UIScale.Parent = MainFrame
    UIScale.Scale = 0 -- Começa pequeno (efeito popup)

    -- Topo
    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0, 45)
    TopBar.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
    TopBar.BorderSizePixel = 0
    TopBar.Parent = MainFrame

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, -60, 1, 0)
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "CORRUPT ZOMBIES - TROLL ATTACK"
    Title.TextColor3 = Color3.fromRGB(255, 50, 50)
    Title.TextSize = 18
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.Parent = TopBar

    local CloseBtn = Instance.new("TextButton")
    CloseBtn.Size = UDim2.new(0, 45, 0, 45)
    CloseBtn.Position = UDim2.new(1, -45, 0, 0)
    CloseBtn.BackgroundTransparency = 1
    CloseBtn.Text = "X"
    CloseBtn.TextColor3 = Color3.fromRGB(255, 100, 100)
    CloseBtn.TextSize = 20
    CloseBtn.Font = Enum.Font.GothamBold
    CloseBtn.Parent = TopBar

    -- Abas
    local CategoriesFrame = Instance.new("Frame")
    CategoriesFrame.Size = UDim2.new(0, 120, 1, -45)
    CategoriesFrame.Position = UDim2.new(0, 0, 0, 45)
    CategoriesFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 40)
    CategoriesFrame.BorderSizePixel = 0
    CategoriesFrame.Parent = MainFrame

    local ContentFrame = Instance.new("Frame")
    ContentFrame.Size = UDim2.new(1, -120, 1, -45)
    ContentFrame.Position = UDim2.new(0, 120, 0, 45)
    ContentFrame.BackgroundTransparency = 1
    ContentFrame.Parent = MainFrame

    local function createCategoryButton(name, posY)
        local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(1, 0, 0, 50)
                btn.Position = UDim2.new(0, 0, 0, posY)
                    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
                        btn.Text = name
                            btn.TextColor3 = Color3.fromRGB(200, 200, 255)
                                btn.TextSize = 14
                                    btn.Font = Enum.Font.GothamBold
                                        btn.BorderSizePixel = 0
                                            btn.Parent = CategoriesFrame
                                                return btn
                                                end

                                                -- Conteúdos
                                                local VisualContent = Instance.new("Frame")
                                                VisualContent.Size = UDim2.new(1, 0, 1, 0)
                                                VisualContent.BackgroundTransparency = 1
                                                VisualContent.Visible = true
                                                VisualContent.Parent = ContentFrame

                                                local AimContent = Instance.new("Frame")
                                                AimContent.Size = UDim2.new(1, 0, 1, 0)
                                                AimContent.BackgroundTransparency = 1
                                                AimContent.Visible = false
                                                AimContent.Parent = ContentFrame

                                                local TrollContent = Instance.new("Frame")
                                                TrollContent.Size = UDim2.new(1, 0, 1, 0)
                                                TrollContent.BackgroundTransparency = 1
                                                TrollContent.Visible = false
                                                TrollContent.Parent = ContentFrame

                                                -- ==================== VISUAL ====================
                                                local function createLabel(text, y)
                                                    local l = Instance.new("TextLabel")
                                                        l.Size = UDim2.new(1, -20, 0, 30)
                                                            l.Position = UDim2.new(0, 10, 0, y)
                                                                l.BackgroundTransparency = 1
                                                                    l.Text = text
                                                                        l.TextColor3 = Color3.fromRGB(200, 200, 255)
                                                                            l.Font = Enum.Font.Gotham
                                                                                l.TextXAlignment = Enum.TextXAlignment.Left
                                                                                    l.TextSize = 14
                                                                                        l.Parent = VisualContent
                                                                                        end
                                                                                        createLabel("ESP Box: Automático", 20)
                                                                                        createLabel("Pressione F1 para Farmar (Travar em você)", 50)

                                                                                        -- ==================== AIMBOT ====================
                                                                                        local StatusLabel = Instance.new("TextLabel")
                                                                                        StatusLabel.Size = UDim2.new(1, 0, 0, 30)
                                                                                        StatusLabel.Position = UDim2.new(0, 10, 0, 10)
                                                                                        StatusLabel.BackgroundTransparency = 1
                                                                                        StatusLabel.Text = "Status: DESLIGADO"
                                                                                        StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
                                                                                        StatusLabel.Font = Enum.Font.GothamBold
                                                                                        StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
                                                                                        StatusLabel.Parent = AimContent

                                                                                        local ToggleButton = Instance.new("TextButton")
                                                                                        ToggleButton.Size = UDim2.new(0, 200, 0, 40)
                                                                                        ToggleButton.Position = UDim2.new(0, 10, 0, 50)
                                                                                        ToggleButton.BackgroundColor3 = Color3.fromRGB(60, 100, 60)
                                                                                        ToggleButton.Text = "LIGAR AIMBOT"
                                                                                        ToggleButton.TextColor3 = Color3.new(1,1,1)
                                                                                        ToggleButton.Font = Enum.Font.GothamBold
                                                                                        ToggleButton.Parent = AimContent

                                                                                        local BindButton = Instance.new("TextButton")
                                                                                        BindButton.Size = UDim2.new(0, 200, 0, 40)
                                                                                        BindButton.Position = UDim2.new(0, 10, 0, 100)
                                                                                        BindButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
                                                                                        BindButton.Text = "BIND: Direito Mouse"
                                                                                        BindButton.TextColor3 = Color3.new(1,1,1)
                                                                                        BindButton.Font = Enum.Font.GothamBold
                                                                                        BindButton.Parent = AimContent

                                                                                        -- FOV
                                                                                        local FovLabel = Instance.new("TextLabel")
                                                                                        FovLabel.Size = UDim2.new(0, 200, 0, 30)
                                                                                        FovLabel.Position = UDim2.new(0, 10, 0, 160)
                                                                                        FovLabel.BackgroundTransparency = 1
                                                                                        FovLabel.Text = "Tamanho FOV: " .. FovRadius
                                                                                        FovLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
                                                                                        FovLabel.Font = Enum.Font.Gotham
                                                                                        FovLabel.Parent = AimContent

                                                                                        local DecreaseFov = Instance.new("TextButton")
                                                                                        DecreaseFov.Size = UDim2.new(0, 40, 0, 40)
                                                                                        DecreaseFov.Position = UDim2.new(0, 10, 0, 190)
                                                                                        DecreaseFov.BackgroundColor3 = Color3.fromRGB(80, 50, 50)
                                                                                        DecreaseFov.Text = "-"
                                                                                        DecreaseFov.TextColor3 = Color3.new(1,1,1)
                                                                                        DecreaseFov.Font = Enum.Font.GothamBold
                                                                                        DecreaseFov.TextSize = 20
                                                                                        DecreaseFov.Parent = AimContent

                                                                                        local IncreaseFov = Instance.new("TextButton")
                                                                                        IncreaseFov.Size = UDim2.new(0, 40, 0, 40)
                                                                                        IncreaseFov.Position = UDim2.new(0, 60, 0, 190)
                                                                                        IncreaseFov.BackgroundColor3 = Color3.fromRGB(50, 80, 50)
                                                                                        IncreaseFov.Text = "+"
                                                                                        IncreaseFov.TextColor3 = Color3.new(1,1,1)
                                                                                        IncreaseFov.Font = Enum.Font.GothamBold
                                                                                        IncreaseFov.TextSize = 20
                                                                                        IncreaseFov.Parent = AimContent

                                                                                        local function updateFovSize(val)
                                                                                            FovRadius = math.clamp(FovRadius + val, 20, 800)
                                                                                                FovLabel.Text = "Tamanho FOV: " .. FovRadius
                                                                                                    FovCircle.Size = UDim2.new(0, FovRadius * 2, 0, FovRadius * 2)
                                                                                                    end
                                                                                                    DecreaseFov.MouseButton1Click:Connect(function() updateFovSize(-10) end)
                                                                                                    IncreaseFov.MouseButton1Click:Connect(function() updateFovSize(10) end)

                                                                                                    -- ==================== TROLL ====================
                                                                                                    local TrollTargetLabel = Instance.new("TextLabel")
                                                                                                    TrollTargetLabel.Size = UDim2.new(1, -20, 0, 30)
                                                                                                    TrollTargetLabel.Position = UDim2.new(0, 10, 0, 10)
                                                                                                    TrollTargetLabel.BackgroundTransparency = 1
                                                                                                    TrollTargetLabel.Text = "Alvo: Ninguém"
                                                                                                    TrollTargetLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
                                                                                                    TrollTargetLabel.Font = Enum.Font.GothamBold
                                                                                                    TrollTargetLabel.TextXAlignment = Enum.TextXAlignment.Left
                                                                                                    TrollTargetLabel.Parent = TrollContent

                                                                                                    local ToggleTrollBtn = Instance.new("TextButton")
                                                                                                    ToggleTrollBtn.Size = UDim2.new(0, 200, 0, 40)
                                                                                                    ToggleTrollBtn.Position = UDim2.new(0, 10, 0, 50)
                                                                                                    ToggleTrollBtn.BackgroundColor3 = Color3.fromRGB(80, 50, 50)
                                                                                                    ToggleTrollBtn.Text = "ENVIAR ZOMBIES: OFF"
                                                                                                    ToggleTrollBtn.TextColor3 = Color3.new(1,1,1)
                                                                                                    ToggleTrollBtn.Font = Enum.Font.GothamBold
                                                                                                    ToggleTrollBtn.Parent = TrollContent

                                                                                                    local PlayerListFrame = Instance.new("ScrollingFrame")
                                                                                                    PlayerListFrame.Size = UDim2.new(1, -20, 1, -110)
                                                                                                    PlayerListFrame.Position = UDim2.new(0, 10, 0, 100)
                                                                                                    PlayerListFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
                                                                                                    PlayerListFrame.ScrollBarThickness = 5
                                                                                                    PlayerListFrame.Parent = TrollContent

                                                                                                    local UIListLayout = Instance.new("UIListLayout")
                                                                                                    UIListLayout.Parent = PlayerListFrame
                                                                                                    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
                                                                                                    UIListLayout.Padding = UDim.new(0, 5)

                                                                                                    local function refreshPlayerList()
                                                                                                        for _, child in pairs(PlayerListFrame:GetChildren()) do
                                                                                                                if child:IsA("TextButton") then child:Destroy() end
                                                                                                                    end
                                                                                                                        for _, p in pairs(Players:GetPlayers()) do
                                                                                                                                if p ~= Player then
                                                                                                                                            local btn = Instance.new("TextButton")
                                                                                                                                                        btn.Size = UDim2.new(1, 0, 0, 35)
                                                                                                                                                                    btn.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
                                                                                                                                                                                btn.Text = p.Name
                                                                                                                                                                                            btn.TextColor3 = Color3.new(1,1,1)
                                                                                                                                                                                                        btn.Font = Enum.Font.Gotham
                                                                                                                                                                                                                    btn.Parent = PlayerListFrame
                                                                                                                                                                                                                                
                                                                                                                                                                                                                                            btn.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                            trollTarget = p
                                                                                                                                                                                                                                                                            TrollTargetLabel.Text = "Alvo: " .. p.Name
                                                                                                                                                                                                                                                                                        end)
                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                    end

                                                                                                                                                                                                                                                                                                    createCategoryButton("TROLL", 130).MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                        VisualContent.Visible = false; AimContent.Visible = false; TrollContent.Visible = true
                                                                                                                                                                                                                                                                                                            refreshPlayerList()
                                                                                                                                                                                                                                                                                                            end)

                                                                                                                                                                                                                                                                                                            Players.PlayerAdded:Connect(refreshPlayerList)
                                                                                                                                                                                                                                                                                                            Players.PlayerRemoving:Connect(refreshPlayerList)

                                                                                                                                                                                                                                                                                                            ToggleTrollBtn.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                if not trollTarget then
                                                                                                                                                                                                                                                                                                                        game.StarterGui:SetCore("SendNotification", {Title="Troll", Text="Selecione um jogador primeiro!", Duration=3})
                                                                                                                                                                                                                                                                                                                                return
                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                        trollEnabled = not trollEnabled
                                                                                                                                                                                                                                                                                                                                            ToggleTrollBtn.Text = trollEnabled and "ENVIAR ZOMBIES: ON" or "ENVIAR ZOMBIES: OFF"
                                                                                                                                                                                                                                                                                                                                                ToggleTrollBtn.BackgroundColor3 = trollEnabled and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(80, 50, 50)
                                                                                                                                                                                                                                                                                                                                                end)

                                                                                                                                                                                                                                                                                                                                                -- ==================== SISTEMA DE ANIMAÇÃO ====================
                                                                                                                                                                                                                                                                                                                                                local function ToggleMenuAnimation(state)
                                                                                                                                                                                                                                                                                                                                                    menuOpen = state
                                                                                                                                                                                                                                                                                                                                                        if state then
                                                                                                                                                                                                                                                                                                                                                                MainFrame.Visible = true
                                                                                                                                                                                                                                                                                                                                                                        -- Animação de Abrir (Efeito elástico/Back)
                                                                                                                                                                                                                                                                                                                                                                                TweenService:Create(UIScale, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Scale = 1}):Play()
                                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                                            -- Animação de Fechar (Efeito rápido)
                                                                                                                                                                                                                                                                                                                                                                                                    local closeTween = TweenService:Create(UIScale, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {Scale = 0})
                                                                                                                                                                                                                                                                                                                                                                                                            closeTween:Play()
                                                                                                                                                                                                                                                                                                                                                                                                                    closeTween.Completed:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                if not menuOpen then MainFrame.Visible = false end
                                                                                                                                                                                                                                                                                                                                                                                                                                        end)
                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                            end

                                                                                                                                                                                                                                                                                                                                                                                                                                            -- ==================== LÓGICA PRINCIPAL ====================
                                                                                                                                                                                                                                                                                                                                                                                                                                            local function createESP(model)
                                                                                                                                                                                                                                                                                                                                                                                                                                                if not model or espTable[model] then return end
                                                                                                                                                                                                                                                                                                                                                                                                                                                    local head = model:FindFirstChild("Head")
                                                                                                                                                                                                                                                                                                                                                                                                                                                        if not head then return end
                                                                                                                                                                                                                                                                                                                                                                                                                                                            local hl = Instance.new("Highlight")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                hl.FillColor = Color3.fromRGB(255, 0, 0)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                    hl.OutlineColor = Color3.fromRGB(255, 255, 255)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        hl.FillTransparency = 0.5
                                                                                                                                                                                                                                                                                                                                                                                                                                                                            hl.Parent = model
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                espTable[model] = hl
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local function getClosestToCenter()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    local closest = nil
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local minDist = FovRadius
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            local centerScreen = Camera.ViewportSize / 2
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for model, _ in pairs(espTable) do
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if model:FindFirstChild("Head") then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    local headPos, onScreen = Camera:WorldToViewportPoint(model.Head.Position)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if onScreen then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local dist = (Vector2.new(headPos.X, headPos.Y) - centerScreen).Magnitude
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if dist < minDist then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    minDist = dist
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        closest = model
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    return closest
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    mainLoop = RunService.RenderStepped:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local folder = Workspace:FindFirstChild("Zombies")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if folder then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    for _, z in pairs(folder:GetChildren()) do
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if z:FindFirstChild("Head") and z:FindFirstChild("Humanoid") then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                createESP(z)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local zRoot = z:FindFirstChild("HumanoidRootPart")
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if zRoot and z.Humanoid.Health > 0 then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- LÓGICA 1: FARM (F1) - Congela na frente do jogador (Prioridade Máxima)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if bringMobsEnabled and Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    zRoot.CFrame = Player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -5)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                -- LÓGICA 2: TROLL (Ataque) - Joga no jogador mas NÃO trava
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    elseif trollEnabled and trollTarget and trollTarget.Character and trollTarget.Character:FindFirstChild("HumanoidRootPart") then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            local targetRoot = trollTarget.Character.HumanoidRootPart
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    local dist = (zRoot.Position - targetRoot.Position).Magnitude
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    -- Se o zumbi estiver longe (> 4 studs), teleporta para perto
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if dist > 4 then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- Teleporta para uma posição aleatória ao redor do alvo para não empilhar
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    local offset = Vector3.new(math.random(-3,3), 0, math.random(-3,3))
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                zRoot.CFrame = targetRoot.CFrame + offset
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            -- Limpeza / Aimbot
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                for model, esp in pairs(espTable) do
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if not model.Parent or (model:FindFirstChild("Humanoid") and model.Humanoid.Health <= 0) then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    esp:Destroy()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                espTable[model] = nil
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if aimbotEnabled and (UserInputService:IsMouseButtonPressed(aimKey) or UserInputService:IsKeyDown(aimKey)) then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        local target = getClosestToCenter()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if target and target:FindFirstChild("Head") then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Head.Position)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        -- ==================== BOTÕES RESTANTES ====================
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        createCategoryButton("VISUAL", 10).MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            VisualContent.Visible = true; AimContent.Visible = false; TrollContent.Visible = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            end)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            createCategoryButton("AIMBOT", 70).MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                VisualContent.Visible = false; AimContent.Visible = true; TrollContent.Visible = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ToggleButton.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    aimbotEnabled = not aimbotEnabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if aimbotEnabled then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                StatusLabel.Text = "Status: LIGADO"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        StatusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ToggleButton.Text = "DESLIGAR"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    else
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            StatusLabel.Text = "Status: DESLIGADO"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    StatusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            ToggleButton.Text = "LIGAR AIMBOT"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                local changingBind = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                BindButton.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    changingBind = true
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        BindButton.Text = "..."
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        UserInputService.InputBegan:Connect(function(input, gp)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if changingBind and not gp then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if input.UserInputType == Enum.UserInputType.MouseButton1 or 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               input.UserInputType == Enum.UserInputType.MouseButton2 or 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          input.KeyCode ~= Enum.KeyCode.Unknown then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      aimKey = input.UserInputType ~= Enum.UserInputType.None and input.UserInputType or input.KeyCode
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  BindButton.Text = "BIND: Definida"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              changingBind = false
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if input.KeyCode == Enum.KeyCode.Insert then 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          ToggleMenuAnimation(not menuOpen) -- Chama a animação
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              end

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  -- F1 (FARM MODE)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if input.KeyCode == Enum.KeyCode.F1 then
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              bringMobsEnabled = not bringMobsEnabled
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      -- Se ativar F1, desliga o Troll automaticamente para não bugar
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if bringMobsEnabled then 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          trollEnabled = false 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ToggleTrollBtn.Text = "ENVIAR ZOMBIES: OFF"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ToggleTrollBtn.BackgroundColor3 = Color3.fromRGB(80, 50, 50)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  local msg = bringMobsEnabled and "FARM: ON (Zombies Travados)" or "FARM: OFF"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          game.StarterGui:SetCore("SendNotification", {Title = "Corrupt Zombies", Text = msg, Duration = 3})
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              local function UnloadScript()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if mainLoop then mainLoop:Disconnect() end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      for _, esp in pairs(espTable) do esp:Destroy() end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if ScreenGui then ScreenGui:Destroy() end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          end
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          CloseBtn.MouseButton1Click:Connect(function()
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ToggleMenuAnimation(false) -- Anima para fechar antes de (opcionalmente) destruir ou apenas esconder
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              end)

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              -- Abre o menu com animação ao executar
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ToggleMenuAnimation(true)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              game.StarterGui:SetCore("SendNotification", {Title = "Corrupt Zombies", Text = "Troll Attack Pronto! (Use Insert)", Duration = 5})
